[![Home](../../img/home.png)](../M-05/README.md)
# Executing simple admin tasks in a container
Let's assume you need to strip all leading whitespaces from a file and you found the following handy Perl script to do exactly that:

```
cat sample.txt | perl -lpe 's/^\s*//'
```

As it turns out, you don't have Perl installed on your working machine. What can you do? Install Perl on the machine? Well, that would certainly be an option, and it's exactly what most developers or system admins do. But wait a second, you already have Docker installed on your machine. Can't we use Docker to circumvent the need to install Perl? Yes, we can. This is how we're going to do it:

Create a folder, **C:\Docker\_en\M-05\sample\simple-task**, and navigate to it:

In this folder, create a sample.txt file with the following content:
```
1234567890
  This is some text
   another line of text
 more text
     final line
```

Please note the whitespaces at the beginning of each line. Save the file.

Now, we can run a container with Perl installed in it. Thankfully, there is an official Perl image on Docker Hub. We are going to use the slim version of the image:
```
wsl
docker container run --rm -it -v $(pwd):/usr/src/app -w /usr/src/app \
    perl:slim sh -c "cat sample.txt | perl -lpe 's/^\s*//'"
PS
docker container run --rm -it -v $pwd/:/usr/src/app -w /usr/src/app     perl:slim sh -c "cat sample.txt | perl -lpe 's/^\s*//'"
```

The preceding command runs a Perl container (perl:slim) interactively, maps the content of the current folder into the /usr/src/app folder of the container, and sets the working folder inside the container to /usr/src/app. The command that is run inside the container is sh -c "cat sample.txt | perl -lpe 's/^\s*//'", basically spawning a Bourne shell and executing our desired Perl command.

The output generated by the preceding command should look like this:

```
1234567890
This is some text
another line of text
more text
final line
```

Without needing to install Perl on our machine, we were able to achieve our goal.
If that doesn't convince you yet because if you're on macOS, you already have Perl installed, then consider you're looking into running a Perl script named your-old-perl-script.pl that is old and not compatible with the newest release of Perl that you happen to have installed on your system. Do you try to install multiple versions of Perl on your machine and potentially break something? No, you just run a container with the (old) version of Perl that is compatible with your script, as in this example:

```
wsl
$ docker container run -it --rm \
    -v $(pwd):/usr/src/app \
    -w /usr/src/app \
    perl:<old-version> perl your-old-perl-script.pl
PS
docker container run -it --rm `
    -v $pwd:/usr/src/app `
    -w /usr/src/app `
    perl:<old-version> perl your-old-perl-script.pl

```

Here, <old-version> corresponds to the tag of the version of Perl that you need to run your script. The nice thing is that, after the script has run, the container is removed from your system without leaving any traces because we used the --rm flag in the docker container run command.

A lot of people use quick and dirty Python scripts or mini apps to automate tasks that are not easily coded with, say, Bash. Now if the Python script has been written in Python 3.7 and you only happen to have Python 2.7 installed, or no version at all on your machine, then the easiest solution is to execute the script inside a container. Let's assume a simple example where the Python script counts lines, words, and letters in a given file and outputs the result to the console:

Still in the ch07/simple-task folder add a stats.py file and add the following content:
```
import sys
 
fname = sys.argv[1]
lines = 0
words = 0
letters = 0
 
for line in open(fname):
    lines += 1
    letters += len(line)
 
    pos = 'out'
    for letter in line:
        if letter != ' ' and pos == 'out':
            words += 1
            pos = 'in'
        elif letter == ' ':
            pos = 'out'
 
print("Lines:", lines)
print("Words:", words)
print("Letters:", letters)
```

After saving the file, you can run it with the following command:
```
wsl
docker container run --rm -it \
    -v $(pwd):/usr/src/app \
    -w /usr/src/app \
    python:3.7.4-alpine python stats.py sample.txt

PS
docker container run --rm -it `
    -v $pwd/:/usr/src/app `
    -w /usr/src/app `
    python:3.7.4-alpine python stats.py sample.txt
```
Note that, in this example, we are reusing the sample.txt file from before. The output in my case is as follows:

```
Lines: 5
Words: 13
Letters: 81
```

The beauty of this approach is that this Python script will now run on any computer with any OS installed, as long as the machine is a Docker host and, hence, can run containers.